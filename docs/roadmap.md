# Yet Another Phone System (YAPS) Roadmap

The following is only a selection of some of the major features we plan to
implement in the near future. To get a more complete overview of planned features
and current work, see the issue trackers for the various repositories, for example,
the [YAPS ecosystem](https://github.com/fonoster/yaps).

## Media Controller(MC)

The Media Controller receives AGI request from Asterisk and takes control of
the call flow. It also allows the implementor to access external resources like
databases, RESTful APIS.

AGI requests are received by routing logic call the `dispatcher`. The dispatcher
uses the information in the AGI request to deliver the call to the appropriate
handler.

Component Specs:

- The handler functions are mounted in the MC filesystem
- The MC must have access to the `admin` API(like logging, storage, billing, etc.)
- The dispatcher sends a simplified version of the AGI request to the handler
- Flow control is done with a simplified set of verbs(Play, Say, Stash, Record...)
- The MC must handle requests from multiple MS(stateless)
- The MC sends logging, billing, and other events to the Message Bus
- Must push all media file to a centralized location(FS)
- Must be able to run unsecured code(sandboxed)

Note: The MC component will not provide with a deploy/undeploy logic

TODO:

- [ ] Draft `admin` functions(yaps.admin, yaps.logging, yaps.auth, yaps.storage...)
- [x] Implement API to push files to the FS
- [x] Create simplified Voice APIS base on verbs

## Media Server(MS)

The Media Server receives SIP traffic from the SIP Proxy and passes control of the call
flow to the MC. All SIP traffic must go through the MS for accounting and logging
reasons. The MS will push all media files to the Files Server(FS).

Component Specs:

- The MS must be able to register to the SIP Proxy
- ARI is used to capture and send events to a Message Queue
- The MS must be able to communicate via AGI with the MC
- All media files will be streamed from the FS

TODO:

- [x] Attempt to play sound from a remote location via http (It works!)
- [ ] Create an ARI agent to communicate with the Message Bus
- [ ] Create a monitor agent to push all new media files to the FS

## Message Bus

The Message Bus "glues" together all the other components.

## Files Server(FS)

This component is use to store media files generated by the MS.
